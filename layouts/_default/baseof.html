<!DOCTYPE html>
<html
  lang="{{ .Site.Language.Lang }}"
  class="{{ if eq (.Site.Params.colorMode | default "light") "dark" }}dark{{ end }}"
>
<head>
    {{ partial "head.html" . }}
    {{ partial "color-variables.html" . }}

    {{ $styles := resources.Get "css/main.css" | postCSS (dict "config" "./postcss.config.js") }}
    {{ if eq hugo.Environment "production" }}
      {{ $styles = $styles | minify | fingerprint }}
    {{ end }}
    <link rel="stylesheet" href="{{ $styles.RelPermalink }}">
</head>

<body class="bg-bg dark:bg-bg text-text-primary dark:text-text-primary flex flex-col min-h-screen transition-colors duration-200">

    <!-- ðŸ”µ PAGE LOADER -->
    <div id="page-loader"
         class="fixed inset-0 z-[200000] flex items-center justify-center bg-bg dark:bg-bg">
      <div class="loader-spinner"></div>
    </div>

    {{ partial "nav.html" . }}
    <div class="w-full h-16"></div>

    <main class="flex-grow">
        {{ block "main" . }}{{ end }}
    </main>

    {{ partial "footer.html" . }}

    {{ $scripts := resources.Get "js/scripts.js" }}
    {{ $gsap := resources.Get "js/gsap-animations.js" }}
    {{ $pexels := resources.Get "js/pexels-background.js" }}
    {{ $colors := resources.Get "js/dynamic-colors.js" }}

    {{ if eq hugo.Environment "production" }}
      {{ $scripts = $scripts | minify | fingerprint }}
      {{ $gsap = $gsap | minify | fingerprint }}
      {{ $pexels = $pexels | minify | fingerprint }}
      {{ $colors = $colors | minify | fingerprint }}
    {{ end }}

    {{ partial "pexels-config.html" . }}
    {{ partial "color-config.html" . }}

    <script src="{{ $scripts.RelPermalink }}"></script>
    <script src="{{ $colors.RelPermalink }}"></script>
    <script src="{{ $gsap.RelPermalink }}"></script>
    <script src="{{ $pexels.RelPermalink }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/fslightbox/index.js"></script>

</body>
</html>
